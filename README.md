>基于 `shnett_base2019年10月9日175647.7z`

#接口说明
##微信小程序
`https://quanjing.shnett.com/shnett_apartment/wx/**`的接口为微信小程序专用接口，例如：
```
url：https://quanjing.shnett.com/shnett_apartment/wx/login/user
请求类型：post
参数：[{code:微信小程序登陆专用的code，由微信小程序生成}]
返回：[{code:0或1},{message:信息}]
```
此类接口shiro为`anon`可以被匿名访问状态，验证的操作由`@Authorization`进行

#更新日志
####2019年10月9日18:02:06
- [更新]根据前端界面的内容调整修改申请时需要的数据

####2019年10月16日14:48:52
- [添加]`公寓管理->房间管理->床位管理`三个功能归属为`公寓管理`界面。分别有对应的增删查改功能。其中房间和床位的信息是直接在表格上做操作的


####2019年10月19日18:35:57
- [添加]小程序消息模板发送代码
- [添加]用户提交新的申请时，将通知userinfo中user_role为'1001'的同事(暂未完成与小程序的配合)
- [添加]用户提交的申请被处理时，将通知到该用户(暂未完成与小程序的配合)
- [更新]为配合小程序消息模板的发送，更改了提交和审批申请时的参数
- [计划]添加微信小程序`form_id`参数的获取和保存，用于管理员审批后的消息知会
- [计划]首页展示入住率等用户比较关心的几项数据
- [计划]导出以`公寓->房间->床位->员工`为逻辑的数据到excel

####2019年10月22日16:55:54
基础功能已经完成
- [添加]小程序订阅消息发送(因新申请的模板腾讯还未通过，故后期还需做添加)
- [添加]导出以`公寓->房间->床位->员工`为逻辑的数据到excel
- [添加][后期需要删除]添加微信小程序`form_id`参数的获取和保存，用于管理员审批后的消息知会。但是因为小程序的限制，form_id只能发送给生成人的OPENID，故保存此消息无用
- [完善]log4的日志系统，将日期放到WEB-INF目录下

####2019年10月29日15:56:38
- [添加]评分管理
- [添加]公告管理
- [添加]导出以`员工->床位->房间->公寓`为逻辑的数据到excel
- [添加]因管理员的消息无法通过点击“订阅消息”的形式获取，故改为邮箱通知审批消息
- [修改]小程序审批列表返回的数据排序，以最新的申请为上
- [完善]人员管理界面功能

####2019年10月30日15:11:46
- [完善]用户绑定账号信息时，如果user_main为空，则赋值为'571Y'，并自动大写用户点部代码
- [计划]添加'入住率'展示界面

####2019年10月31日15:55:03
- [修复]导出评分数据时，评分日期和备注内容对调的问题
- [BUG]小程序审核无微信订阅消息通知：发送回执:{"errcode":47003,"errmsg":"argument invalid! hint: [h.wsKA00423943] data.name3.value invalid"}，方法相同，但是网页端审批却可以

####2019年11月1日18:54:14
- [添加]入住率

####2019年11月1日19:13:40
- [修复]入住率查询异常的问题

####2019年11月10日14:04:18
- [添加]分点部管理功能
- [添加]签到功能

####2019年11月13日19:40:34
- [添加]分点部管理功能中添加修改区部、点部名称，删除区部、点部信息的功能。其中，①删除区部，将会同时删除对应的点部信息②删除点部，只会删除点部信息，不会删除区部和点部下的用户信息

####2019年11月14日00:05:38
【功能复盘】
`主页`:入住率展示。按照人员或公寓床位数为基数的入住率图表化
`用户管理`:对已绑定微信的用户进行工号、账号状态、所属大区、所属网点、联系方式、身份证号进行管理
`网点管理`:对大区信息和大区所属的分点部信息进行管理
`公寓管理`:对公寓、公寓下的房间、房间下的床位进行逐级管理
`申请审批`:用户提交的入住或退租申请审批界面
`数据分析`:查看某个公寓的入住情况，或者导出(一公寓信息为主导)或(以员工信息为主导)的表格数据
`公告管理`:对小程序上的公告进行管理
`评分管理`:查看所有或特定公寓的评分，导出所有评价

####2019年11月14日02:20:43
- [修复]多选框动态数据时，存在未知原因的异常情况(数据分析界面和评分界面都会报错‘Uncaught TypeError: Cannot read property 'getAttribute' of null’，但是主界面的下拉又是正常的)，故使用新的xm-select进行替代【文档<https://maplemei.gitee.io/xm-select/#/component/install>】
- [修复]绑定工号时，如果需要绑定的工号已存在，则不可进行绑定
